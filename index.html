<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var nomeHotel = "hotelzinho";
        var senha = 2678;
        var nome_usuario;
        var lista_hospedes = [];

        // Inicializa a lista de quartos, todos estão livres inicialmente
        var quartos = [];
        for (var i = 0; i < 20; i++) {
            quartos.push({ numero: i + 1, ocupado: false });
        }

        // Função para verificar a senha
        function verificar_senha() {
            nome_usuario = prompt('Por favor, digite seu nome: ');
            var senhaDigitada = parseInt(window.prompt('Digite a senha a seguir:'));

            if (senha === senhaDigitada) {
                alert('Acesso válido');
                sistema_acessado(nome_usuario);
            } else if (isNaN(senhaDigitada) || senhaDigitada === null) {
                alert('Insira uma senha válida');
                verificar_senha();
            } else {
                alert('Acesso negado');
                verificar_senha();
            }
        }

        // Função para mostrar mensagem de boas-vindas ao sistema
        function sistema_acessado(nome) {
            alert(`Bem vindo ao Hotel ${nomeHotel}, ${nome}. É um imenso prazer tê-lo por aqui!`);
            inicio();
        }

        // Função para iniciar o sistema e exibir o menu principal
        function inicio() {
            var escolha = parseInt(prompt('Cadastro de Hóspedes\nSelecione uma opção:\n\n 1.Reservar\n 2.Cadastrar\n 3.Pesquisar\n 4.Sair'));

            switch (escolha) {
                case 1:
                    alert('Você escolheu a opção reservar');
                    reserva_quarto();
                    break;
                case 2:
                    alert('Você escolheu a opção cadastro');
                    cadastrar_hospedes();
                    break;
                case 3:
                    alert('Você está na opção pesquisa');
                    pesquisar_hospedes();
                    break;
                case 4:
                    alert('Você escolheu sair');
                    sair()
                    break;
                default:
                    erro();
            }
        }

        // Função para reservar um quarto
        function reserva_quarto() {
            var dias_hospedados = parseInt(prompt("Quantas diárias serão necessárias?"));

            var quantidade_dias = (dias_hospedados <= 1) ? "dia" : "dias";

            var valor_diaria = parseFloat(prompt("Qual o valor padrão da diária?"));

            // Inicializa as variáveis de contagem de descontos
            var gratuita = 0;
            var meia = 0;

            // Inicializa as variáveis de total de descontos e total a pagar
            var total_descontos = 0;
            var total_a_pagar = 0;

            // Inicializa as variáveis de total de hóspedes
            var total_hospedes = 0;

            var pergunta = "";

            while (pergunta !== "pare") {
                var nome_hospede = prompt("Qual o nome do hóspede?");
                lista_hospedes.push(nome_hospede);
                total_hospedes++; // Incrementa o número total de hóspedes

                var idade_hospede = parseInt(prompt("Qual a idade do hóspede?"));

                pergunta = prompt("Deseja inserir mais um hospede? Se não digite pare");

                // Verifica se o hóspede tem direito a desconto
                if (idade_hospede <= 6) {
                    alert(`${nome_hospede} possui gratuidade.`);
                    gratuita++;
                } else if (idade_hospede >= 60) {
                    meia++;
                    alert(`${nome_hospede} paga meia.`);
                }
            }

            var total_desconto_gratuidade = valor_diaria * gratuita;
            alert(total_desconto_gratuidade);

            // Calcula o total de descontos de meia hospedagem
            var total_desconto_meia = (valor_diaria * meia) / 2;
            alert(total_desconto_meia);

            // Soma os descontos ao total de descontos
            total_descontos = total_desconto_gratuidade + total_desconto_meia;
            alert(total_descontos);

            // Calcula o total a pagar
            total_a_pagar = (valor_diaria * dias_hospedados * total_hospedes) - total_descontos;
            alert(total_a_pagar);

            // "{Nome}, o valor total das hospedagens é: R$250; 1 gratuidade(s); 1 meia(s)"

            // Exibe a mensagem de confirmação da 
            
            var quantidade_gratuito = (gratuita >= 1) ? `${gratuita} gratuidade(s); ` : ``;
            var quantidade_meia = (meia >= 1) ? `${meia} meia(s).` : ``;


            // alert(`${nome_usuario}, o valor total das hospedagens é: R$${total_a_pagar.toFixed(2)}; ${gratuita} gratuidade(s); ${meia} meia(s)`);
            alert(`${nome_usuario}, o valor total das hospedagens é: R$${total_a_pagar.toFixed(2)}; ${quantidade_gratuito} ${quantidade_meia}`);

            inicio();
        }

        function cadastrar_hospedes() {
            if (lista_hospedes.length >= 15) {
                alert("Numero máximo de hóspedes cadastrados.");
            } else {
                var nome_hospede = prompt('Por favor, informe o nome da(o) hóspede:');
                lista_hospedes.push(nome_hospede);
                console.log(lista_hospedes);
                alert(`Sucesso! Hóspede  ${nome_hospede} foi cadastrada(o) com sucesso!\n`);
                // alert("Sucesso! Hóspede " + nome_hospede + " foi cadastrada(o) com sucesso!\n");
            }

            inicio();
        }

        function pesquisar_hospedes() {
            var nome_hospede = prompt('Por favor, informe o nome da(o) hóspede para pesquisa:');
            if (lista_hospedes.includes(nome_hospede)) {
                alert(`${nome_hospede} encontrada(o).`);
                // alert(nome_hospede + ' encontrada(o).')

            } else {
                alert(`${nome_hospede} não foi encontrada(o).`);
                // alert(nome_hospede + ' não foi encontrada(o).');
            }

            inicio();
        }

        function sair() {
            alert(`Muito obrigado(a) e até logo ${nome_usuario}`);
        }

        // Função para lidar com erros de entrada
        function erro() {
            alert('Por favor, informe um número entre 1 e 4');
            inicio();
        }

        // Iniciar o sistema
        verificar_senha();

    </script>
</body>

</html>
